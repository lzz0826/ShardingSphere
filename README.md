# ShardingSphere
<br /><br />
# 初期阶段：垂直分库和垂直分表
# 后期阶段：水平分库和水平分表

<br />

# 垂直拆分
將業務的不同分類，不同的業務劃分到不同的應用。這種拆分往往是根據系統的改造，將原來的功能模組依照更細粒度的拆分成多個弱耦合的服務

## 垂直分库：
按照业务模块将数据分散到不同的数据库中，每个数据库存储一个业务模块的数据。

假设我们有一个外賣系统，包含 商品管理 订单管理 用户管理 三个主要业务模块。我们可以按照业务将数据垂直拆分成三个数据库：
![image](https://raw.githubusercontent.com/lzz0826/ShardingSphere/main/images/002.webp)
垂直拆分就是要把表按功能模块划分到不同数据库中，如果你的系统是分布式微服务的架构，那就更好理解了，一般一个微服务对应这一个或多个数据库。比如电商系统一般都会有用户中心、订单、商品等等。用户中心数据库存的都是用户信息相关的，商品数据库存的都是商品相关的数据，订单数据库则是存的订单相关的。

## 垂直分表：
将一个表中的列按照不同的业务逻辑拆分成多个表，以减少单个表的宽度，提高查询性能。

设我们有一个用户表 users，包含用户的基本信息和详细信息。为了优化查询，我们可以将用户表垂直拆分成两个表：

![image](https://raw.githubusercontent.com/lzz0826/ShardingSphere/main/images/001.png)
垂直分表是将一张数据表的字段，拆成两张或两张以上的数据进行存放。这样做的目的一个是避免一张表存的字段太多，单条数据的数据量大，不仅会占用更多的物理内容，还会降低查询的性能。而且有些字段查询的不是很频繁，有些字段查询的很频繁，那我们就可以将这查询频繁和查询不频繁的字段分开存放。这样就可以避免磁盘进行不必要的IO，提高系统的性能。我们一般都是把查询频繁的字段放到主表中，查询不频繁且不是很重要的字段放到扩展表中。主表和扩展表是1对1的关系，之间用主键进行关联。

# 水平拆分

## 库内分表：
![image](https://github.com/lzz0826/EventualConsistency/blob/main/img/10.png)

## 分库分表：
![image](https://github.com/lzz0826/EventualConsistency/blob/main/img/10.png)


